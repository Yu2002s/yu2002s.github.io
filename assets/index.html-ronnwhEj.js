import{_ as n,o as a,c as i,e}from"./app-CV__oJZ3.js";const l={};function p(t,s){return a(),i("div",null,s[0]||(s[0]=[e(`<h2 id="nginx-go-access-日志分析器" tabindex="-1"><a class="header-anchor" href="#nginx-go-access-日志分析器"><span>Nginx-Go-Access(日志分析器)</span></a></h2><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h3><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 安装 goaccess</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">apt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> goaccess</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 格式化日志</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">goaccess</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -f</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> xxx.log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>开启报告分析</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">goaccess</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> access.log</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -o</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ../html/report.html</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --real-time-html</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --log-format=COMBINED</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>nginx 日志目录: <code>/var/log/nginx/access.html</code></p><p>nginx html 根目录：<code>/usr/share/nginx/html</code></p><p>查看报告: 浏览器访问 <code>http://host/report.html</code></p><h2 id="安装-nginx" tabindex="-1"><a class="header-anchor" href="#安装-nginx"><span>安装 Nginx</span></a></h2><p>1.安装 ：<a href="https://nginx.org/en/linux_packages.html#Ubuntu" target="_blank" rel="noopener noreferrer">nginx: Linux packages</a></p><p>2.配置防火墙，开放 80 端口</p><p>3.配置环境变量</p><p>4.输入命令 nginx 启动服务器</p><p>5.停止 nginx</p><p>6.重载</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reload</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>7.配置路径 <strong>/ect/nginx/nginx.config</strong></p><p>8.检查配置</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="配置" tabindex="-1"><a class="header-anchor" href="#配置"><span>配置</span></a></h3><div class="language-conf line-numbers-mode" data-ext="conf" data-title="conf"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>server {</span></span>
<span class="line"><span>    listen       80;  //监听端口为80，可以自定义其他端口，也可以加上IP地址，如，listen 127.0.0.1:8080;</span></span>
<span class="line"><span>    server_name  localhost; //定义网站域名，可以写多个，用空格分隔。</span></span>
<span class="line"><span>    #charset koi8-r; //定义网站的字符集，一般不设置，而是在网页代码中设置。</span></span>
<span class="line"><span>    #access_log  logs/host.access.log  main; //定义访问日志，可以针对每一个server（即每一个站点）设置它们自己的访问日志。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    ##在server{}里有很多location配置段</span></span>
<span class="line"><span>    location / {</span></span>
<span class="line"><span>        root   html;  //定义网站根目录，目录可以是相对路径也可以是绝对路径。</span></span>
<span class="line"><span>        index  index.html index.htm; //定义站点的默认页。</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    #error_page  404              /404.html;  //定义404页面</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    # redirect server error pages to the static page /50x.html</span></span>
<span class="line"><span>    #</span></span>
<span class="line"><span>    error_page   500 502 503 504  /50x.html;  //当状态码为500、502、503、504时，则访问50x.html</span></span>
<span class="line"><span>    location = /50x.html {</span></span>
<span class="line"><span>        root   html;  //定义50x.html所在路径</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    # proxy the PHP scripts to Apache listening on 127.0.0.1:80</span></span>
<span class="line"><span>    #</span></span>
<span class="line"><span>    #定义访问php脚本时，将会执行本location{}部分指令</span></span>
<span class="line"><span>    #location ~ \\.php$ {</span></span>
<span class="line"><span>    #    proxy_pass   http://127.0.0.1;  //proxy_pass后面指定要访问的url链接，用proxy_pass实现代理。</span></span>
<span class="line"><span>    #}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span></span>
<span class="line"><span>    #</span></span>
<span class="line"><span>    #location ~ \\.php$ {</span></span>
<span class="line"><span>    #    root           html;</span></span>
<span class="line"><span>    #    fastcgi_pass   127.0.0.1:9000;  //定义FastCGI服务器监听端口与地址，支持两种形式，1 IP:Port， 2 unix:/path/to/sockt</span></span>
<span class="line"><span>    #    fastcgi_index  index.php;</span></span>
<span class="line"><span>    #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;  //定义SCRIPT_FILENAME变量，后面的路径/scripts为上面的root指定的目录</span></span>
<span class="line"><span>    #    include        fastcgi_params; //引用prefix/conf/fastcgi_params文件，该文件定义了fastcgi相关的变量</span></span>
<span class="line"><span>    #}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    # deny access to .htaccess files, if Apache&#39;s document root</span></span>
<span class="line"><span>    # concurs with nginx&#39;s one</span></span>
<span class="line"><span>    #</span></span>
<span class="line"><span>    #location ~ /\\.ht {   //访问的url中，以/.ht开头的，如，www.example.com/.htaccess，会被拒绝，返回403状态码。</span></span>
<span class="line"><span>    #    deny  all;  //这里的all指的是所有的请求。</span></span>
<span class="line"><span>    #}</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># another virtual host using mix of IP-, name-, and port-based configuration</span></span>
<span class="line"><span>#</span></span>
<span class="line"><span>#server {</span></span>
<span class="line"><span>#    listen       8000;  //监听8000端口</span></span>
<span class="line"><span>#    listen       somename:8080;  //指定ip:port</span></span>
<span class="line"><span>#    server_name  somename  alias  another.alias;  //指定多个server_name</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#    location / {</span></span>
<span class="line"><span>#        root   html;</span></span>
<span class="line"><span>#        index  index.html index.htm;</span></span>
<span class="line"><span>#    }</span></span>
<span class="line"><span>#}</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># HTTPS server</span></span>
<span class="line"><span>#</span></span>
<span class="line"><span>#server {</span></span>
<span class="line"><span>#    listen       443 ssl;  //监听443端口，即ssl</span></span>
<span class="line"><span>#    server_name  localhost;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>### 以下为ssl相关配置</span></span>
<span class="line"><span>#    ssl_certificate      cert.pem;    //指定pem文件路径</span></span>
<span class="line"><span>#    ssl_certificate_key  cert.key;  //指定key文件路径</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#    ssl_session_cache    shared:SSL:1m;  //指定session cache大小</span></span>
<span class="line"><span>#    ssl_session_timeout  5m;  //指定session超时时间</span></span>
<span class="line"><span>#    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;   //指定ssl协议</span></span>
<span class="line"><span>#    ssl_ciphers  HIGH:!aNULL:!MD5;  //指定ssl算法</span></span>
<span class="line"><span>#    ssl_prefer_server_ciphers  on;  //优先采取服务器算法</span></span>
<span class="line"><span>#    location / {</span></span>
<span class="line"><span>#        root   html;</span></span>
<span class="line"><span>#        index  index.html index.htm;</span></span>
<span class="line"><span>#    }</span></span>
<span class="line"><span>#}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,21)]))}const d=n(l,[["render",p],["__file","index.html.vue"]]),r=JSON.parse('{"path":"/memo/nginx/","title":"Nginx配置","lang":"zh-CN","frontmatter":{"title":"Nginx配置","createTime":"2024/11/19 19:37:54","permalink":"/memo/nginx/","tags":["Nginx"],"description":"Nginx-Go-Access(日志分析器) 安装 开启报告分析 nginx 日志目录: /var/log/nginx/access.html nginx html 根目录：/usr/share/nginx/html 查看报告: 浏览器访问 http://host/report.html 安装 Nginx 1.安装 ：nginx: Linux pack...","head":[["meta",{"property":"og:url","content":"https://www.jdynb.xyz/memo/nginx/"}],["meta",{"property":"og:site_name","content":"冬日暖雨"}],["meta",{"property":"og:title","content":"Nginx配置"}],["meta",{"property":"og:description","content":"Nginx-Go-Access(日志分析器) 安装 开启报告分析 nginx 日志目录: /var/log/nginx/access.html nginx html 根目录：/usr/share/nginx/html 查看报告: 浏览器访问 http://host/report.html 安装 Nginx 1.安装 ：nginx: Linux pack..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-07-13T07:22:29.000Z"}],["meta",{"property":"article:tag","content":"Nginx"}],["meta",{"property":"article:modified_time","content":"2025-07-13T07:22:29.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Nginx配置\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-07-13T07:22:29.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Nginx-Go-Access(日志分析器)","slug":"nginx-go-access-日志分析器","link":"#nginx-go-access-日志分析器","children":[{"level":3,"title":"安装","slug":"安装","link":"#安装","children":[]}]},{"level":2,"title":"安装 Nginx","slug":"安装-nginx","link":"#安装-nginx","children":[{"level":3,"title":"配置","slug":"配置","link":"#配置","children":[]}]}],"readingTime":{"minutes":2.37,"words":711},"git":{"createdTime":1732021179000,"updatedTime":1752391349000,"contributors":[{"name":"Yu2002s","email":"jiangdongyu54@gmail.com","commits":2}]},"autoDesc":true,"filePathRelative":"notes/memo/nginx/README.md","bulletin":false}');export{d as comp,r as data};
