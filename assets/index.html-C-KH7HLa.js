import{_ as p,o,c,e as a,b as l,d as t,a as i,f as s,r as n}from"./app-CV__oJZ3.js";const g={};function y(m,e){const k=n("VPIcon"),h=n("CodeTabs");return o(),c("div",null,[e[2]||(e[2]=a('<p>通过 <code>Docker</code> 部署 <code>Java</code> 项目，解决部署到其他机器上，无法运行的问题</p><h2 id="使用-maven-插件" tabindex="-1"><a class="header-anchor" href="#使用-maven-插件"><span>使用 <code>Maven</code> 插件</span></a></h2><p>将 <code>SpringBoot</code> 项目打包成 <code>Docker</code> 镜像，其主要通过 <code>Maven plugin</code> 插件来进行构建。</p><p>在之前都是通过 <code>docker-maven-plugin</code> 插件进行打包，而现在已经升级出现了新的插件：</p><p><code>dockerfile-maven-plugin</code></p><p>接下来我们就是通过这个 plugin 插件进行操作。</p>',6)),l(h,{id:"19",data:[{id:"pom.xml"}]},{title0:t(({value:d,isActive:r})=>[l(k,{name:"vscode-icons:file-type-maven"}),e[0]||(e[0]=i("span",null,"pom.xml",-1))]),tab0:t(({value:d,isActive:r})=>e[1]||(e[1]=[i("div",{class:"language-xml line-numbers-mode","data-ext":"xml","data-title":"xml"},[i("button",{class:"copy",title:"复制代码","data-copied":"已复制"}),i("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"<"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"plugin"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"  <"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"groupId"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">"),i("span",{style:{"--shiki-light":"#393A34","--shiki-dark":"#DBD7CAEE"}},"com.spotify"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"</"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"groupId"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"  <"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"artifactId"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">"),i("span",{style:{"--shiki-light":"#393A34","--shiki-dark":"#DBD7CAEE"}},"dockerfile-maven-plugin"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"</"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"artifactId"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"  <"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"version"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">"),i("span",{style:{"--shiki-light":"#393A34","--shiki-dark":"#DBD7CAEE"}},"1.4.13"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"</"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"version"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"  <"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"executions"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"    <"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"execution"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"      <"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"id"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">"),i("span",{style:{"--shiki-light":"#393A34","--shiki-dark":"#DBD7CAEE"}},"default"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"</"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"id"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"      <"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"goals"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"        <"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"goal"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">"),i("span",{style:{"--shiki-light":"#393A34","--shiki-dark":"#DBD7CAEE"}},"build"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"</"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"goal"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"        <"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"goal"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">"),i("span",{style:{"--shiki-light":"#393A34","--shiki-dark":"#DBD7CAEE"}},"push"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"</"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"goal"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"      </"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"goals"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"    </"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"execution"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"  </"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"executions"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"  <"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"configuration"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"    <"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"repository"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">"),i("span",{style:{"--shiki-light":"#393A34","--shiki-dark":"#DBD7CAEE"}},"${docker.image.prefix}/${project.artifactId}"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"</"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"repository"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"    <"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"tag"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">"),i("span",{style:{"--shiki-light":"#393A34","--shiki-dark":"#DBD7CAEE"}},"${project.version}"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"</"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"tag"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"    <"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"buildArgs"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"      <"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"JAR_FILE"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">"),i("span",{style:{"--shiki-light":"#393A34","--shiki-dark":"#DBD7CAEE"}},"${project.build.finalName}.jar"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"</"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"JAR_FILE"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"    </"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"buildArgs"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"  </"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"configuration"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"</"),i("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"plugin"),i("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},">")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1)])),_:1}),e[3]||(e[3]=a(`<p>参数说明：</p><ul><li><p><code>repository</code>：指定 Docker 镜像的 repo 名字，要展示在 <code>docker images</code> 中的。</p></li><li><p><code>tag</code>：指定 Docker 镜像的 tag，不指定 tag 默认为 latest</p></li><li><p><code>buildArg</code>s：指定一个或多个变量，传递给 <code>Dockerfile</code>，在 Dockerfile 中通过 ARG 指令进行引用。<code>JAR_FILE</code> 指定 jar 文件名。</p></li></ul><p>另外，可以在<code>execution</code>中同时指定<code>build</code>和<code>push</code>目标。当运行<code>mvn package</code>时，会自动执行 build 目标，构建 Docker 镜像。</p><h2 id="dcockerfile" tabindex="-1"><a class="header-anchor" href="#dcockerfile"><span>DcockerFile</span></a></h2><p>DockerFile 文件需要放置在项目 <code>pom.xml</code> 同级目录下，内容大致如下：</p><div class="language-dockerfile line-numbers-mode" data-ext="dockerfile" data-title="dockerfile"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">FROM</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> java:8</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">EXPOSE</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> 8080</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">ARG</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> JAR_FILE</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">ADD</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> target/\${JAR_FILE} /niceyoo.jar</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">ENTRYPOINT</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&quot;java&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&quot;-jar&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&quot;/niceyoo.jar&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>参数说明：</p><ul><li><code>FROM</code>：基于 <code>java:8</code> 镜像构建</li><li><code>EXPOSE</code>：监听 <code>8080</code> 端口</li><li><code>ARG</code>：引用 plugin 中配置的 <code>JAR_FILE</code> 文件</li><li><code>ADD</code>：将当前 target 目录下的 jar 放置在根目录下，命名为 <code>niceyoo.jar</code>，推荐使用绝对路径。</li><li><code>ENTRYPOINT</code>：执行命令 <code>java -jar /niceyoo.jar</code></li></ul><p>当前完整的 pom.xml：</p>`,9))])}const D=p(g,[["render",y],["__file","index.html.vue"]]),v=JSON.parse('{"path":"/article/2u371ze9/","title":"将java项目打包到Docker容器","lang":"zh-CN","frontmatter":{"title":"将java项目打包到Docker容器","createTime":"2024/11/24 18:44:28","permalink":"/article/2u371ze9/","tags":["Java","Docker"],"description":"通过 Docker 部署 Java 项目，解决部署到其他机器上，无法运行的问题 使用 Maven 插件 将 SpringBoot 项目打包成 Docker 镜像，其主要通过 Maven plugin 插件来进行构建。 在之前都是通过 docker-maven-plugin 插件进行打包，而现在已经升级出现了新的插件： dockerfile-maven-...","head":[["meta",{"property":"og:url","content":"https://www.jdynb.xyz/article/2u371ze9/"}],["meta",{"property":"og:site_name","content":"冬日暖雨"}],["meta",{"property":"og:title","content":"将java项目打包到Docker容器"}],["meta",{"property":"og:description","content":"通过 Docker 部署 Java 项目，解决部署到其他机器上，无法运行的问题 使用 Maven 插件 将 SpringBoot 项目打包成 Docker 镜像，其主要通过 Maven plugin 插件来进行构建。 在之前都是通过 docker-maven-plugin 插件进行打包，而现在已经升级出现了新的插件： dockerfile-maven-..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-02-10T12:45:18.000Z"}],["meta",{"property":"article:tag","content":"Java"}],["meta",{"property":"article:tag","content":"Docker"}],["meta",{"property":"article:modified_time","content":"2025-02-10T12:45:18.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"将java项目打包到Docker容器\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-02-10T12:45:18.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"使用 Maven 插件","slug":"使用-maven-插件","link":"#使用-maven-插件","children":[]},{"level":2,"title":"DcockerFile","slug":"dcockerfile","link":"#dcockerfile","children":[]}],"readingTime":{"minutes":1.32,"words":395},"git":{"createdTime":1732446746000,"updatedTime":1739191518000,"contributors":[{"name":"Yu2002s","email":"jiangdongyu54@gmail.com","commits":4}]},"autoDesc":true,"filePathRelative":"docker/将java项目打包到Docker容器.md","categoryList":[{"id":"05b605","sort":10003,"name":"docker"}],"bulletin":false}');export{D as comp,v as data};
